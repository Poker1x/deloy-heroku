"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("http"),r=require("micro"),n=e(r),o=e(require("clone-response"));function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,r){return(f=a()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&c(o,r.prototype),o}).apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}var s=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,r)||this).statusCode=t,n}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n}(p(Error));function l(e,t,r){var n={configurable:!0,enumerable:!0},o=u({},n,{writable:!0});Object.defineProperty(e,t,u({},n,{get:function(){var n=r();return Object.defineProperty(e,t,u({},o,{value:n})),n},set:function(r){Object.defineProperty(e,t,u({},o,{value:r}))}}))}var y=function(e){try{var t=o(e),n=o(e);return Promise.resolve(r.buffer(t)).then((function(e){var t,r;return l(n,"cookies",function(e){return function(){var t=e.headers.cookie;return t?(0,require("cookie").parse)(Array.isArray(t)?t.join(";"):t):{}}}(n)),l(n,"query",(r=void 0===(t=n.url)?"/":t,function(){return(0,require("url").parse)(r,!0).query})),null!=e&&l(n,"body",function(e,t){return function(){if(e.headers["content-type"]){var r=(0,require("content-type").parse)(e.headers["content-type"]).type;if("application/json"===r)try{var n=t.toString();return n?JSON.parse(n):{}}catch(e){throw new s(400,"Invalid JSON")}return"application/octet-stream"===r?t:"application/x-www-form-urlencoded"===r?(0,require("querystring").parse)(t.toString()):"text/plain"===r?t.toString():void 0}}}(n,e)),n}))}catch(e){return Promise.reject(e)}},v=function(e){var t,n=Object.assign(e,{status:function(e){return t=e,n},json:function(e){return r.send(n,t||200,e),n},send:function(e){return r.send(n,t||200,e),n},text:function(e){return r.send(n,t||200,e),n}});return n};exports.ApiError=s,exports.createServer=function(e,r){return null!=r&&r.disableHelpers?new t.Server(e):n((function(t,r){try{return Promise.resolve(y(t)).then((function(t){var n=v(r);return Promise.resolve(e(t,n))}))}catch(e){return Promise.reject(e)}}))},exports.enhanceRequest=y,exports.enhanceResponse=v;
//# sourceMappingURL=vercel-node-server.cjs.production.min.js.map
